import{j as e,_ as $,b2 as w,F as E,aj as A,b1 as k,v as T,aa as O,a3 as _,J as z}from"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e10.js";import{b as h,aA as L,n as M,aB as R}from"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e22.js";import{u as g,c as q}from"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e19.js";import"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e18.js";import{a as u}from"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e4.js";import{h as B}from"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e39.js";import{a as D}from"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e107.js";import"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e8.js";import"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e.js";import"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e5.js";import"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e7.js";import"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e6.js";import"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e2.js";import"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e3.js";import"./v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e9.js";const I=u.lazy(()=>$(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_0_1_4b8cc392-a410-45f6-b662-85abdad9c03e169.js")),[]));function x(){return e.jsx(u.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(I,{})})}const S=({follow:n})=>{const{disableFollowUp:o}=h(),{language:d}=g(),i=n.funil.abas.length===0&&n.funil.etiquetas.length===0;return u.useEffect(()=>{i&&o(n.id)},[i,o,n.id]),i?e.jsx("span",{className:"lg:tooltip lg:tooltip-right","data-tip":d.funilFollowIsEmpty,children:e.jsx(B,{color:"red",size:24})}):null};function le(){const{FollowUp:n,deleteFollowUp:o,switchActive:d,duplicateFollowUp:i}=h(),{setEditFollowUp:f,setResetDefaultFollowUp:j}=L(),{isBusiness:v}=q(),{open:m}=M(),{language:a}=g(),{setAcao:b}=R(),y=s=>{b(s.acao),f(s),m(e.jsx(x,{}))},N=s=>{const t=s.days?`${s.days} ${a.day}${s.days>1?"s":""}`:"",l=s.hours?`${s.hours} ${a.hour}${s.hours>1?"s":""}`:"",c=s.minutes?`${s.minutes} ${a.minute}${s.minutes>1?"s":""}`:"",r=[t,l,c].filter(Boolean);if(r.length===0)return a.now;if(r.length===1)return r[0];const p=r.pop();return`${r.join(", ")} ${a.and} ${p}`},F=s=>{switch(s.type){case"dispararAoEntrar":return a.onEnter;case"dispararAoSair":return a.onLeave;case"timing":return`${a.onTime}: ${N(s.timing)}`;default:return s.type}},C=s=>{const{propriedades:t}=s,l=t,c=s.type,r=[];switch(c){case"cancelAfterChat":r.push(a.cancelAfterMessage);break;case"responderGrupos":r.push(a.replyGroups);break;case"assinatura":r.push(`${a.signature}: ${l.desativarAss?a.disabled:l.persAss.nameAss}`);break;default:return null}return r},U=e.jsx("div",{className:"flex flex-col gap-2 overflow-auto max-h-full",children:[...n].reverse().map(s=>e.jsxs("div",{className:`rounded-2xl cursor-pointer border border-[var(--conversation-header-border)] 
             border-solid w-full p-4 hover:bg-[var(--background-default-active)] flex justify-between gap-1 overflow-hidden`,style:{opacity:s.active?1:.7},children:[e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg font-bold truncate",children:s.nome}),e.jsx(S,{follow:s})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{children:`${a.actionType}:`}),e.jsx("p",{className:"font-bold",children:F(s.acionamento)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("p",{children:`${a.funnels}:`}),e.jsx("div",{className:"flex gap-1",children:[...s.funil.abas,...s.funil.etiquetas].length===0?e.jsx("div",{className:"badge badge-md bg-gray-200 text-gray-600 font-semibold",children:a.funnelEmpty}):e.jsxs(e.Fragment,{children:[[...s.funil.abas,...s.funil.etiquetas].slice(0,6).map((t,l)=>{const r="tag"in t?t.tag:t.name,p="hexColor"in t?{backgroundColor:t.hexColor,color:w(t.hexColor,160)}:{backgroundColor:"var(--primaria)",color:"#FFF"};return e.jsx("div",{style:p,className:"badge badge-md font-semibold !truncate !max-w-[100px]",children:e.jsx("span",{className:"truncate",children:r})},l)}),[...s.funil.abas,...s.funil.etiquetas].length>6&&e.jsxs("div",{className:"badge badge-md bg-gray-200 text-gray-600 font-semibold",children:["+",[...s.funil.abas,...s.funil.etiquetas].length-6]})]})})]}),Object.values(s.regras).filter(t=>t.propriedades.active).length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("p",{children:`${a.activeRules}:`}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Object.values(s.regras).filter(t=>t.propriedades.active).map((t,l)=>e.jsx("span",{className:"badge badge-md badge-neutral font-semibold py-1 px-2 rounded",children:C(t)},l))})]}),e.jsxs("div",{className:"flex justify-start gap-2 items-center h-9 pt-2",children:[e.jsx("span",{children:a.active}),e.jsx(E,{estado:s.active,switchUpdate:()=>d(s.id),id:s.id,zoom:{zoom:"60%"}})]})]}),e.jsx("div",{className:"flex flex-col justify-between flex-shrink-0",children:e.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-bottom",onClick:()=>y(s),"data-tip":a.edit,children:e.jsx(A,{className:"w-5 h-5 text-[var(--panel-header-icon)]"})}),e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-bottom",onClick:()=>o(s),"data-tip":a.delete,children:e.jsx(D,{className:"w-5 h-5 text-[var(--panel-header-icon)]"})}),e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-left",onClick:()=>i(s.id),"data-tip":a.duplic,children:e.jsx(k,{className:"w-5 h-5 text-[var(--panel-header-icon)]"})})]})})]},s.id))});return e.jsxs("div",{className:"w-[800px] max-h-[99.5vh] flex flex-col gap-4",children:[e.jsx(T,{children:a.followUp}),n.length===0?e.jsx(O,{title:a.nothingFollowUpCreatedTitle,description:v?a.nothingFollowUpCreatedDescBusiness:a.nothingFollowUpCreatedDesc,icon:e.jsx(_,{className:"w-7 h-7 text-[var(--primaria)]"})}):e.jsx("div",{className:"flex-1 overflow-y-auto",children:U}),e.jsx("div",{className:"m-auto",children:e.jsx(z,{name:a.create,funcao:()=>{j(),m(e.jsx(x,{}),!1)}})})]})}export{le as default};
